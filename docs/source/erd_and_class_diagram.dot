digraph erd_and_classes {
    graph [rankdir = "LR"]
    /*
        ellipse = field/attribute
        note = PK
        folder = FK
        component = FK that makes up a composite PK
        Mrecord = methods
        teeodot = 0..1 (unique but optional)
        crowodot = 0..N (optional, not unique)
        teetee = 1..1 (exactly one)
        crowtee = 1..N (neither optional nor unique)

        Starting with two underscores means not from user stories
    */

    /* *** ESTABLISHED RELATIONS/CLASSES *** */

    // RELATIONS/CLASSES

    subgraph cluster_Resource_Titles {
        label="Resource_Titles"

        // Attributes
        Resource_Title_ID [shape="note"]
        Resource_Title
        Resource_ID_in_Resource_Titles [
            label="Resource_ID"
            shape="folder"
        ]

        // Methods
    }


    subgraph cluster_Resources {
        label="Resources"

        // Attributes
        Resource_ID [shape="note"]
        DOI
        ISBN
        Print_ISSN
        Online_ISSN
        Data_Type // The initial list from R4 reports will have the less specific R4 types derived from the type of report itself. Should the R5 types overwrite these values or go in their own field?

        // Methods
    }


    subgraph cluster_Provided_Resources {
        label="Provided_Resources"

        // Attributes
        Provided_Resource_ID [shape="note"]
        Publisher_aka_Provider
        Platform_aka_Interface
        Proprietary_ID
        Publisher_ID // This is found in R5 onlyâ€”how to add it?
        Resource_ID_in_Provided_Resources [
            label="Resource_ID"
            shape="folder"
        ]

        // Methods
    }


    subgraph cluster_Statistics_Sources {
        label="Statistics_Sources"

        // Attributes
        Statistics_Source_ID [shape="note"]
        __SUSHI_Requestor_ID
        __SUSHI_Customer_ID
        __SUSHI_API_Key
        __SUSHI_Interface_URL
        //SUSHI_Platform (another parameter?)

        // Methods
        // Since harvesting is done for a particular FY, its method is part of the annual tracking class
    }


    subgraph cluster_Annual_Usage_Collection_Tracking {
        label="Annual_Usage_Collection_Tracking"

        // Attributes
        Annual_Usage_Collection_Tracking_Year [shape="component"]
        Annual_Usage_Collection_Tracking_Source [shape="component"]
        __Is_COUNTER_Compliant // Because this can change from year to year
        __Is_R5_SUSHI_Compliant // Because this can change from year to year
        __Collection_Completed // Not a Boolean--need an "in process" option
        __Requires_Manual_Collection
        __Has_Usage_Portal
        __Notes__Annual_Usage_Collection_Tracking

        // Methods
        harvest
    }


    subgraph cluster_Fiscal_Year {
        label="Fiscal_Year"

        // Attributes
        Fiscal_Year_ID [shape="note"]
        year

        // Methods
    }


    // RELATIONSHIPS
    /*
        Establish relationships from the PK (tail) to the FK (head)
        table --------(can connect to)---------[optionality]--(and)--[cardinality]-->other table
        arrowhead = how PK table can connect to FK table
        arrowtail = how FK table can connect to PK table
    */
    Resource_ID -> Resource_ID_in_Resource_Titles [
        dir="both"
        arrowhead="crowtee"
        arrowtail="teetee"
    ]
    Resource_ID -> Resource_ID_in_Provided_Resources [
        dir="both"
        arrowhead="crowtee"
        arrowtail="teetee"
    ]


    /* *** OBJECTS TO BE ORGANIZED *** */

    // Nouns: Classes or Attributes
    resources
    non_COUNTER usage stats
    notes [
        shape="record"
        label="notes|thoughts"
    ]
    librarians [
        shape="record"
        label="e-resources library associate|e-resources librarian|database developer|assessment librarian"
    ]
    "Databases A to Z"
    "Databases A to Z items"
    "names a databases goes and has gone by"
    /* Do these need to be kept?
        reference
        location
        databases
        aggregator
        initial database data
        unique resource list
        platform and_or vendor issued correction notices (possibly a subset of notes)
    */

    //Verbs: Methods
    create
    store
    collect
    add notes
    record
    match
    connect
    find
    change
    look

    /* Do these need to be kept?
        send
        automatically sum
        add
        know
        organize
        has gone by
        use
        start
        pulled
        submitted
    */

    subgraph cluster_COUNTER_Terms {
        // Nouns: Classes or Attributes
        "COUNTER reports"
        "R4 reports"
        "R5 SUSHI"
        "COUNTER stats"
        "SUSHI reports"
        report
        // Verbs: Methods
    }

    subgraph cluster_Annual_Collection_Terms{
        // Nouns: Classes or Attributes
        "historical usage data"
        ARL
        ACRL_IPEDS
        "data for a given reporting year"
        // Verbs: Methods
    }

    subgraph cluster_Technical_Terms {
        // Nouns: Classes or Attributes
        spreadsheets
        emails
        files
        "file format"
        workbooks
        database
        "normalized list of resources"
        // Verbs: Methods
        download
        "generate emails"
        upload
        dedupe
        copy
        paste
    }

    subgraph cluster_Acquisitions_Terms {
        // Nouns: Classes or Attributes
        vendors
        "order numbers"
        "current ILS"
        "legacy ILS"
        "price data"
        invoices
        // Verbs: Methods
    }

    subgraph cluster_COUNTER_Report_Data {
        // Nouns: Classes or Attributes
        __resource_title [
            shape="record"
            label="title (R4)|database (DR)|title (TR)|item (IR)"
        ]
        __resource publisher
        "__publisher ID (R5)"
        platforms [
            shape="record"
            label="platforms|user interfaces"
        ]
        __DOI
        "__proprietary ID"
        __ISBN
        "__print ISSN"
        "__online ISSN"
        "__URI (R5 TR, IR)"
        "__data type"
        "__section type (R5 IR)"
        "__metric type"
        "__usage date"
        usage_statistics_count [
            shape="record"
            label="usage stats|e-resources usage numbers"
        ]
        "__report creation date (for harvested R5)"
        "__YoP (R5 TR, IR)"
        "__access type (R5 TR, IR)"
        "__access method (R5)"
        // Verbs: Methods
    }
}