digraph function_call_chains {
    graph [rankdir="LR"]

    /* Cluster Types
        `penwidth=5`
        Class: `style="rounded"`
        Tests: `style="dashed"`

        Relation: `color="#ceb888"` (Gold)
        Blueprint: `color="#782f40"` (Garnet)
        Module collecting general functions: `color="#5cb8b2"`
    */

    node [  // To remove the fill color from the individual function nodes
        style="filled"
        fillcolor="white"
    ]
    /* Node Types
        Route functions: `shape="cds"`
        Function connecting to S3: `shape="folder"`
        Function connecting to MySQL: `shape="cylinder"`
        Other functions: `shape="box"`

        Test function: `style="dashed"`
        Fixture function: `style="dotted"`
    */

    /*
        Edges represent function calls
            Edges are instantiated under the cluster containing the calling function
            Edges go from the calling function to the called function
        Function calls include
            Redirects between Flask routes via `url_for()`
            Calls to a Flask route function with the Flask test client (these use the URL in the decorator, not the function name)
    */

    subgraph cluster_fiscalYears {
        label="nolcat.models.fiscalYears"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_fiscalYears [
            label="state_data_types"
            shape="box"
        ]
        calculate_depreciated_ACRL_60b [shape="box"]
        calculate_depreciated_ACRL_63 [shape="box"]
        calculate_ACRL_61a [shape="box"]
        calculate_ACRL_61b [shape="box"]
        calculate_ARL_18 [shape="box"]
        calculate_ARL_19 [shape="box"]
        calculate_ARL_20 [shape="box"]
        create_usage_tracking_records_for_fiscal_year [shape="box"]
        collect_fiscal_year_usage_statistics [shape="box"]
    }
    create_usage_tracking_records_for_fiscal_year -> state_data_types_in_annualUsageCollectionTracking
    collect_fiscal_year_usage_statistics -> _harvest_R5_SUSHI

    subgraph cluster_annualStatistics {
        label="nolcat.models.annualStatistics"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_annualStatistics [
            label="state_data_types"
            shape="box"
        ]
        add_annual_statistic_value [shape="box"]
    }


    subgraph cluster_vendors {
        label="nolcat.models.vendors"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_vendors [
            label="state_data_types"
            shape="box"
        ]
        get_statisticsSources_records [shape="box"]
        get_resourceSources_records [shape="box"]
        add_note_in_vendors [
            label="add_note"
            shape="box"
        ]
    }


    subgraph cluster_vendorNotes {
        label="nolcat.models.vendorNotes"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_vendorNotes [
            label="state_data_types"
            shape="box"
        ]
    }


    subgraph cluster_statisticsSources {
        label="nolcat.models.statisticsSources"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_statisticsSources [
            label="state_data_types"
            shape="box"
        ]
        fetch_SUSHI_information [shape="box"]
        _harvest_R5_SUSHI [shape="box"]
        _harvest_single_report [shape="box"]
        _check_if_data_in_database [shape="box"]
        collect_usage_statistics [shape="box"]
        add_note_in_statisticsSources [
            label="add_note"
            shape="box"
        ]
    }
    fetch_SUSHI_information -> PATH_TO_CREDENTIALS_FILE
    _harvest_R5_SUSHI -> fetch_SUSHI_information
    _harvest_R5_SUSHI -> _harvest_single_report
    _harvest_R5_SUSHI -> make_SUSHI_call
    _harvest_single_report -> _check_if_data_in_database
    _harvest_single_report -> state_data_types_in_COUNTERData
    _harvest_single_report -> create_dataframe_in_ConvertJSONDictToDataframe
    _harvest_single_report -> make_SUSHI_call
    collect_usage_statistics -> _harvest_R5_SUSHI


    subgraph cluster_statisticsSourceNotes {
        label="nolcat.models.statisticsSourceNotes"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_statisticsSourceNotes [
            label="state_data_types"
            shape="box"
        ]
    }


    subgraph cluster_resourceSources {
        label="nolcat.models.resourceSources"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_resourceSources [
            label="state_data_types"
            shape="box"
        ]
        add_access_stop_date [shape="box"]
        remove_access_stop_date [shape="box"]
        change_StatisticsSource [shape="box"]
        add_note_in_resourceSources [
            label="add_note"
            shape="box"
        ]
    }
    change_StatisticsSource -> state_data_types_in_statisticsResourceSources


    subgraph cluster_resourceSourceNotes {
        label="nolcat.models.resourceSourceNotes"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_resourceSourceNotes [
            label="state_data_types"
            shape="box"
        ]
    }


    subgraph cluster_statisticsResourceSources {
        label="nolcat.models.statisticsResourceSources"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_statisticsResourceSources [
            label="state_data_types"
            shape="box"
        ]
    }


    subgraph cluster_annualUsageCollectionTracking {
        label="nolcat.models.annualUsageCollectionTracking"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_annualUsageCollectionTracking [
            label="state_data_types"
            shape="box"
        ]
        collect_annual_usage_statistics [shape="box"]
        upload_nonstandard_usage_file [shape="box"]
        download_nonstandard_usage_file [shape="box"]
    }
    collect_annual_usage_statistics -> _harvest_R5_SUSHI


    subgraph cluster_COUNTERData {
        label="nolcat.models.COUNTERData"
        penwidth=5
        style="rounded"
        color="#ceb888"

        state_data_types_in_COUNTERData [
            label="state_data_types"
            shape="box"
        ]
    }


    subgraph cluster_SUSHICallAndResponse {
        label="nolcat.SUSHICallAndResponse"
        penwidth=5
        style="rounded"

        make_SUSHI_call [shape="box"]
        _make_API_call [shape="box"]
        _convert_Response_to_JSON [shape="box"]
        _save_raw_Response_text [shape="box"]
        _handle_SUSHI_exceptions [shape="box"]
        _evaluate_individual_SUSHI_exception [shape="box"]
        _stdout_API_response_based_on_size [shape="box"]
    }
    make_SUSHI_call -> _make_API_call
    make_SUSHI_call -> _convert_Response_to_JSON
    make_SUSHI_call -> _save_raw_Response_text
    make_SUSHI_call -> _handle_SUSHI_exceptions
    make_SUSHI_call -> _stdout_API_response_based_on_size
    _convert_Response_to_JSON -> _stdout_API_response_based_on_size
    _handle_SUSHI_exceptions -> _evaluate_individual_SUSHI_exception


    subgraph cluster_UploadCOUNTERReports {
        label="nolcat.UploadCOUNTERReports"
        penwidth=5
        style="rounded"

        create_dataframe_in_UploadCOUNTERReports [
            label="create_dataframe"
            shape="box"
        ]
    }
    create_dataframe_in_UploadCOUNTERReports -> state_data_types_in_COUNTERData


    subgraph cluster_ConvertJSONDictToDataframe {
        label="nolcat.ConvertJSONDictToDataframe"
        penwidth=5
        style="rounded"

        create_dataframe_in_ConvertJSONDictToDataframe [
            label="create_dataframe"
            shape="box"
        ]
        _transform_R5_JSON [shape="box"]
        _transform_R5b1_JSON [shape="box"]
        _serialize_dates [shape="box"]
    }
    create_dataframe_in_ConvertJSONDictToDataframe -> _transform_R5_JSON
    create_dataframe_in_ConvertJSONDictToDataframe -> _transform_R5b1_JSON
    _transform_R5_JSON -> _serialize_dates


    subgraph cluster_annual_stats {
        label="nolcat.annual_stats"
        penwidth=5
        color="#782f40"

        annual_stats_homepage [shape="cds"]
        show_fiscal_year_details [shape="cds"]
    }
    annual_stats_homepage -> show_fiscal_year_details
    show_fiscal_year_details -> annual_stats_homepage
    show_fiscal_year_details -> state_data_types_in_fiscalYears
    show_fiscal_year_details -> state_data_types_in_annualUsageCollectionTracking


    subgraph cluster_ingest_usage {
        label="nolcat.ingest_usage"
        penwidth=5
        color="#782f40"

        ingest_usage_homepage [shape="cds"]
        upload_COUNTER_data [shape="cds"]
        harvest_SUSHI_statistics [shape="cds"]
        upload_non_COUNTER_reports [shape="cds"]
    }
    upload_COUNTER_data -> ingest_usage_homepage
    upload_COUNTER_data -> create_dataframe_in_UploadCOUNTERReports
    harvest_SUSHI_statistics -> ingest_usage_homepage
    harvest_SUSHI_statistics -> collect_usage_statistics
    upload_non_COUNTER_reports -> ingest_usage_homepage
    upload_non_COUNTER_reports -> upload_nonstandard_usage_file


    subgraph cluster_initialization {
        label="nolcat.initialization"
        penwidth=5
        color="#782f40"

        collect_FY_and_vendor_data [shape="cds"]
        collect_sources_data [shape="cds"]
        collect_AUCT_and_historical_COUNTER_data [shape="cds"]
        upload_historical_non_COUNTER_usage [shape="cds"]
        data_load_complete [shape="cds"]
    }
    collect_FY_and_vendor_data -> collect_sources_data
    collect_FY_and_vendor_data -> state_data_types_in_fiscalYears
    collect_FY_and_vendor_data -> state_data_types_in_annualStatistics
    collect_FY_and_vendor_data -> state_data_types_in_vendors
    collect_FY_and_vendor_data -> state_data_types_in_vendorNotes
    collect_sources_data -> collect_AUCT_and_historical_COUNTER_data
    collect_sources_data -> state_data_types_in_statisticsSources
    collect_sources_data -> state_data_types_in_statisticsSourceNotes
    collect_sources_data -> state_data_types_in_resourceSources
    collect_sources_data -> state_data_types_in_resourceSourceNotes
    collect_AUCT_and_historical_COUNTER_data -> collect_FY_and_vendor_data
    collect_AUCT_and_historical_COUNTER_data -> collect_sources_data
    collect_AUCT_and_historical_COUNTER_data -> upload_historical_non_COUNTER_usage
    collect_AUCT_and_historical_COUNTER_data -> state_data_types_in_annualUsageCollectionTracking
    collect_AUCT_and_historical_COUNTER_data -> create_dataframe_in_UploadCOUNTERReports
    upload_historical_non_COUNTER_usage -> data_load_complete
    upload_historical_non_COUNTER_usage -> upload_nonstandard_usage_file


    subgraph cluster_login {
        label="nolcat.login"
        penwidth=5
        color="#782f40"

        login_homepage [shape="cds"]
    }


    subgraph cluster_view_lists {
        label="nolcat.view_lists"
        penwidth=5
        color="#782f40"

        view_lists_homepage [shape="cds"]
        view_list_record [shape="cds"]
        edit_list_record [shape="cds"]
    }


    subgraph cluster_view_usage {
        label="nolcat.view_usage"
        penwidth=5
        color="#782f40"

        create_COUNTER_fixed_vocab_list [shape="box"]
        set_encoding [shape="box"]
        create_downloads_folder [shape="box"]
        view_usage_homepage [shape="cds"]
        run_custom_SQL_query [shape="cds"]
        use_predefined_SQL_query [shape="cds"]
        start_query_wizard [shape="cds"]
        query_wizard_sort_redirect [shape="cds"]
        construct_PR_query_with_wizard [shape="cds"]
        construct_DR_query_with_wizard [shape="cds"]
        construct_TR_query_with_wizard [shape="cds"]
        construct_IR_query_with_wizard [shape="cds"]
        download_non_COUNTER_usage [shape="cds"]
    }
    run_custom_SQL_query -> set_encoding
    run_custom_SQL_query -> create_downloads_folder
    run_custom_SQL_query -> view_usage_homepage
    use_predefined_SQL_query -> set_encoding
    use_predefined_SQL_query -> create_downloads_folder
    use_predefined_SQL_query -> view_usage_homepage
    start_query_wizard -> view_usage_homepage
    start_query_wizard -> query_wizard_sort_redirect
    query_wizard_sort_redirect -> start_query_wizard
    construct_PR_query_with_wizard -> create_COUNTER_fixed_vocab_list
    construct_PR_query_with_wizard -> set_encoding
    construct_PR_query_with_wizard -> create_downloads_folder
    construct_PR_query_with_wizard -> view_usage_homepage
    construct_DR_query_with_wizard -> create_COUNTER_fixed_vocab_list
    construct_DR_query_with_wizard -> set_encoding
    construct_DR_query_with_wizard -> create_downloads_folder
    construct_DR_query_with_wizard -> view_usage_homepage
    construct_TR_query_with_wizard -> create_COUNTER_fixed_vocab_list
    construct_TR_query_with_wizard -> set_encoding
    construct_TR_query_with_wizard -> create_downloads_folder
    construct_TR_query_with_wizard -> view_usage_homepage
    construct_IR_query_with_wizard -> create_COUNTER_fixed_vocab_list
    construct_IR_query_with_wizard -> set_encoding
    construct_IR_query_with_wizard -> create_downloads_folder
    construct_IR_query_with_wizard -> view_usage_homepage
    download_non_COUNTER_usage -> create_downloads_folder
    download_non_COUNTER_usage -> view_usage_homepage
    download_non_COUNTER_usage -> state_data_types_in_annualUsageCollectionTracking
    download_non_COUNTER_usage -> download_nonstandard_usage_file


    subgraph cluster_PATH_TO_CREDENTIALS_FILE {
        label="nolcat.models.PATH_TO_CREDENTIALS_FILE"
        penwidth=5

        PATH_TO_CREDENTIALS_FILE [shape="box"]
    }


    subgraph cluster_app {
        label="nolcat.app"
        penwidth=5
        color="#5cb8b2"

        filter_empty_parentheses [shape="box"]
        configure_logging [shape="box"]
        page_not_found [shape="box"]
        internal_server_error [shape="box"]
        create_app [shape="box"]
        "create_app.create_db" [shape="box"]
        "create_app.homepage" [shape="cds"]
        "create_app.download_file" [shape="cds"]
        last_day_of_month
        first_new_PK_value
        return_string_of_dataframe_info
        change_single_field_dataframe_into_series
        restore_boolean_values_to_boolean_field
        upload_file_to_S3_bucket
        create_AUCT_SelectField_options
        load_data_into_database
        query_database
        check_if_data_already_in_COUNTERData
        truncate_longer_lines
        update_database
        save_unconverted_data_via_upload
        ISSN_regex
        ISBN_regex
        extract_value_from_single_value_df
        S3_file_name_timestamp
        non_COUNTER_file_name_regex
    }
    configure_logging -> filter_empty_parentheses
    create_app -> configure_logging
    "create_app.create_db" -> create_app


    subgraph cluster_statements {
        label="nolcat.statements"
        penwidth=5
        color="#5cb8b2"

        file_extensions_and_mimetypes
        format_list_for_stdout
        remove_IDE_spacing_from_statement
        initialize_relation_class_object_statement
        fixture_variable_value_declaration_statement
        unable_to_convert_SUSHI_data_to_dataframe_statement
        unable_to_get_updated_primary_key_values_statement
        Flask_error_statement
        file_IO_statement
        list_folder_contents_statement
        check_if_file_exists_statement
        failed_upload_to_S3_statement
        unable_to_delete_test_file_in_S3_statement
        upload_file_to_S3_bucket_success_regex
        upload_nonstandard_usage_file_success_regex
        return_value_from_query_statement
        return_dataframe_from_query_statement
        database_query_fail_statement
        database_update_fail_statement
        add_data_success_and_update_database_fail_statement
        database_function_skip_statements
        load_data_into_database_success_regex
        update_database_success_regex
        successful_SUSHI_call_statement
        harvest_R5_SUSHI_success_statement
        failed_SUSHI_call_statement
        no_data_returned_by_SUSHI_statement
        attempted_SUSHI_call_with_invalid_dates_statement
        reports_with_no_usage_regex
        skip_test_due_to_SUSHI_error_regex
    }


    subgraph cluster_relations {
        label="tests.data.relations"
        penwidth=5
        color="#5cb8b2"

        fiscalYears_relation_in_relations [
            label="fiscalYears_relation"
            /*shape=""*/
        ]
        annualStatistics_relation_in_relations [
            label="annualStatistics_relation"
            /*shape=""*/
        ]
        vendors_relation_in_relations [
            label="vendors_relation"
            /*shape=""*/
        ]
        vendorNotes_relation_in_relations [
            label="vendorNotes_relation"
            /*shape=""*/
        ]
        statisticsSources_relation_in_relations [
            label="statisticsSources_relation"
            /*shape=""*/
        ]
        statisticsSourceNotes_relation_in_relations [
            label="statisticsSourceNotes_relation"
            /*shape=""*/
        ]
        resourceSources_relation_in_relations [
            label="resourceSources_relation"
            /*shape=""*/
        ]
        resourceSourceNotes_relation_in_relations [
            label="resourceSourceNotes_relation"
            /*shape=""*/
        ]
        statisticsResourceSources_relation_in_relations [
            label="statisticsResourceSources_relation"
            /*shape=""*/
        ]
        annualUsageCollectionTracking_relation_in_relations [
            label="annualUsageCollectionTracking_relation"
            /*shape=""*/
        ]
        workbook_0_2017_relation_in_relations [
            label="workbook_0_2017_relation"
            /*shape=""*/
        ]
        workbook_1_2017_relation_in_relations [
            label="workbook_1_2017_relation"
            /*shape=""*/
        ]
        workbook_2_2017_relation_in_relations [
            label="workbook_2_2017_relation"
            /*shape=""*/
        ]
        workbook_0_2018_relation_in_relations [
            label="workbook_0_2018_relation"
            /*shape=""*/
        ]
        workbook_1_2018_relation_in_relations [
            label="workbook_1_2018_relation"
            /*shape=""*/
        ]
        workbook_2_2018_relation_in_relations [
            label="workbook_2_2018_relation"
            /*shape=""*/
        ]
        workbook_0_2019_relation_in_relations [
            label="workbook_0_2019_relation"
            /*shape=""*/
        ]
        workbook_1_2019_relation_in_relations [
            label="workbook_1_2019_relation"
            /*shape=""*/
        ]
        workbook_2_2019_relation_in_relations [
            label="workbook_2_2019_relation"
            /*shape=""*/
        ]
        workbook_3_2019_relation_in_relations [
            label="workbook_3_2019_relation"
            /*shape=""*/
        ]
        workbook_0_2020_relation_in_relations [
            label="workbook_0_2020_relation"
            /*shape=""*/
        ]
        workbook_1_2020_relation_in_relations [
            label="workbook_1_2020_relation"
            /*shape=""*/
        ]
        workbook_2_2020_relation_in_relations [
            label="workbook_2_2020_relation"
            /*shape=""*/
        ]
        workbook_3_2020_relation_in_relations [
            label="workbook_3_2020_relation"
            /*shape=""*/
        ]
    }
    fiscalYears_relation_in_relations -> state_data_types_in_fiscalYears
    annualStatistics_relation_in_relations -> state_data_types_in_annualStatistics
    vendors_relation_in_relations -> state_data_types_in_vendors
    vendorNotes_relation_in_relations -> state_data_types_in_vendorNotes
    statisticsSources_relation_in_relations -> state_data_types_in_statisticsSources
    statisticsSourceNotes_relation_in_relations -> state_data_types_in_statisticsSourceNotes
    resourceSources_relation_in_relations -> state_data_types_in_resourceSources
    resourceSourceNotes_relation_in_relations -> state_data_types_in_resourceSourceNotes
    statisticsResourceSources_relation_in_relations -> state_data_types_in_statisticsResourceSources
    annualUsageCollectionTracking_relation_in_relations -> state_data_types_in_annualUsageCollectionTracking
    workbook_0_2017_relation_in_relations -> state_data_types_in_COUNTERData
    workbook_1_2017_relation_in_relations -> state_data_types_in_COUNTERData
    workbook_2_2017_relation_in_relations -> state_data_types_in_COUNTERData
    workbook_0_2018_relation_in_relations -> state_data_types_in_COUNTERData
    workbook_1_2018_relation_in_relations -> state_data_types_in_COUNTERData
    workbook_2_2018_relation_in_relations -> state_data_types_in_COUNTERData
    workbook_0_2019_relation_in_relations -> state_data_types_in_COUNTERData
    workbook_1_2019_relation_in_relations -> state_data_types_in_COUNTERData
    workbook_2_2019_relation_in_relations -> state_data_types_in_COUNTERData
    workbook_3_2019_relation_in_relations -> state_data_types_in_COUNTERData
    workbook_0_2020_relation_in_relations -> state_data_types_in_COUNTERData
    workbook_1_2020_relation_in_relations -> state_data_types_in_COUNTERData
    workbook_2_2020_relation_in_relations -> state_data_types_in_COUNTERData
    workbook_3_2020_relation_in_relations -> state_data_types_in_COUNTERData


    subgraph cluster_conftest {
        label="tests.conftest"
        penwidth=5
        style="dashed"
        color="#5cb8b2"

        engine
        app
        client
        db
        session
        fiscalYears_relation_in_conftest [
            label="fiscalYears_relation"
            /*shape=""*/
        ]
        annualStatistics_relation_in_conftest [
            label="annualStatistics_relation"
            /*shape=""*/
        ]
        vendors_relation_in_conftest [
            label="vendors_relation"
            /*shape=""*/
        ]
        vendorNotes_relation_in_conftest [
            label="vendorNotes_relation"
            /*shape=""*/
        ]
        statisticsSources_relation_in_conftest [
            label="statisticsSources_relation"
            /*shape=""*/
        ]
        statisticsSourceNotes_relation_in_conftest [
            label="statisticsSourceNotes_relation"
            /*shape=""*/
        ]
        resourceSources_relation_in_conftest [
            label="resourceSources_relation"
            /*shape=""*/
        ]
        resourceSourceNotes_relation_in_conftest [
            label="resourceSourceNotes_relation"
            /*shape=""*/
        ]
        statisticsResourceSources_relation_in_conftest [
            label="statisticsResourceSources_relation"
            /*shape=""*/
        ]
        annualUsageCollectionTracking_relation_in_conftest [
            label="annualUsageCollectionTracking_relation"
            /*shape=""*/
        ]
        workbook_0_2017_relation_in_conftest [
            label="workbook_0_2017_relation"
            /*shape=""*/
        ]
        workbook_1_2017_relation_in_conftest [
            label="workbook_1_2017_relation"
            /*shape=""*/
        ]
        workbook_2_2017_relation_in_conftest [
            label="workbook_2_2017_relation"
            /*shape=""*/
        ]
        workbook_0_2018_relation_in_conftest [
            label="workbook_0_2018_relation"
            /*shape=""*/
        ]
        workbook_1_2018_relation_in_conftest [
            label="workbook_1_2018_relation"
            /*shape=""*/
        ]
        workbook_2_2018_relation_in_conftest [
            label="workbook_2_2018_relation"
            /*shape=""*/
        ]
        workbook_0_2019_relation_in_conftest [
            label="workbook_0_2019_relation"
            /*shape=""*/
        ]
        workbook_1_2019_relation_in_conftest [
            label="workbook_1_2019_relation"
            /*shape=""*/
        ]
        workbook_2_2019_relation_in_conftest [
            label="workbook_2_2019_relation"
            /*shape=""*/
        ]
        workbook_3_2019_relation_in_conftest [
            label="workbook_3_2019_relation"
            /*shape=""*/
        ]
        workbook_0_2020_relation_in_conftest [
            label="workbook_0_2020_relation"
            /*shape=""*/
        ]
        workbook_1_2020_relation_in_conftest [
            label="workbook_1_2020_relation"
            /*shape=""*/
        ]
        workbook_2_2020_relation_in_conftest [
            label="workbook_2_2020_relation"
            /*shape=""*/
        ]
        workbook_3_2020_relation_in_conftest [
            label="workbook_3_2020_relation"
            /*shape=""*/
        ]
        workbooks_and_relations
        create_COUNTERData_workbook_iterdir_list
        COUNTERData_relation
        download_destination
        path_to_sample_file
        remove_file_from_S3
        non_COUNTER_AUCT_object_before_upload
        non_COUNTER_AUCT_object_after_upload
        non_COUNTER_file_to_download_from_S3
        header_value
        most_recent_month_with_usage
        match_direct_SUSHI_harvest_result
        COUNTER_reports_offered_by_statistics_source
        prepare_HTML_page_for_comparison
    }
    app -> create_app
    app -> configure_logging
    match_direct_SUSHI_harvest_result -> state_data_types_in_COUNTERData
    COUNTER_reports_offered_by_statistics_source -> make_SUSHI_call


    subgraph cluster_test_AnnualStatistics {
        label="tests.test_AnnualStatistics"
        penwidth=5
        style="dashed"
        color="#ceb888"

        test_add_annual_statistic_value
    }


    subgraph cluster_test_AnnualUsageCollectionTracking {
        label="tests.test_AnnualUsageCollectionTracking"
        penwidth=5
        style="dashed"
        color="#ceb888"

        AUCT_fixture_for_SUSHI
        harvest_R5_SUSHI_result_in_test_AnnualUsageCollectionTracking [
            label="harvest_R5_SUSHI_result"
            /*shape=""*/
        ]
        test_collect_annual_usage_statistics
        sample_FileStorage_object
        test_upload_nonstandard_usage_file
        test_download_nonstandard_usage_file
    }
    harvest_R5_SUSHI_result_in_test_AnnualUsageCollectionTracking -> _harvest_R5_SUSHI
    test_collect_annual_usage_statistics -> collect_annual_usage_statistics
    test_upload_nonstandard_usage_file -> upload_nonstandard_usage_file
    test_download_nonstandard_usage_file -> download_nonstandard_usage_file


    subgraph cluster_test_app {
        label="tests.test_app"
        penwidth=5
        style="dashed"
        color="#5cb8b2"

        test_flask_app_creation
        test_flask_client_creation
        test_SQLAlchemy_engine_creation
        test_homepage
        test_404_page
        test_load_data_into_database
        test_query_database
        test_loading_connected_data_into_other_relation
        test_download_file
        test_first_new_PK_value
        test_change_single_field_dataframe_into_series
        test_restore_boolean_values_to_boolean_field
        test_upload_file_to_S3_bucket
        test_create_AUCT_SelectField_options
        test_truncate_longer_lines
        vendors_relation_after_test_update_database
        test_update_database
        vendors_relation_after_test_update_database_with_insert_statement
        test_update_database_with_insert_statement
        test_prepare_HTML_page_for_comparison
        file_name_stem_and_data
        test_save_unconverted_data_via_upload
        test_ISSN_regex
        test_ISBN_regex
        test_last_day_of_month
        test_extract_value_from_single_value_df
        test_S3_file_name_timestamp
        test_non_COUNTER_file_name_regex
    }
    test_homepage -> "create_app.homepage"
    test_404_page -> page_not_found
    test_query_database -> state_data_types_in_vendors
    test_loading_connected_data_into_other_relation -> state_data_types_in_vendors
    test_loading_connected_data_into_other_relation -> state_data_types_in_statisticsSources
    test_download_file -> "create_app.download_file"
    vendors_relation_after_test_update_database -> state_data_types_in_vendors
    test_update_database -> state_data_types_in_vendors
    vendors_relation_after_test_update_database_with_insert_statement -> state_data_types_in_vendors
    test_update_database_with_insert_statement -> state_data_types_in_vendors


    subgraph cluster_test_bp_annual_stats {
        label="tests.test_bp_annual_stats"
        penwidth=5
        style="dashed"
        color="#782f40"

        test_GET_request_for_annual_stats_homepage
        test_GET_request_for_show_fiscal_year_details
        test_show_fiscal_year_details_submitting_RunAnnualStatsMethodsForm
        test_show_fiscal_year_details_submitting_EditFiscalYearForm
        test_show_fiscal_year_details_submitting_EditAUCTForm
    }
    test_GET_request_for_annual_stats_homepage -> annual_stats_homepage


    subgraph cluster_test_bp_ingest_usage {
        label="tests.test_bp_ingest_usage"
        penwidth=5
        style="dashed"
        color="#782f40"

        test_ingest_usage_homepage
        test_upload_COUNTER_data_via_Excel
        test_upload_COUNTER_data_via_SQL_insert
        test_match_direct_SUSHI_harvest_result
        test_GET_request_for_harvest_SUSHI_statistics
        test_harvest_SUSHI_statistics
        test_GET_request_for_upload_non_COUNTER_reports
        test_upload_non_COUNTER_reports
    }
    test_ingest_usage_homepage -> ingest_usage_homepage
    test_upload_COUNTER_data_via_Excel -> state_data_types_in_COUNTERData
    test_upload_COUNTER_data_via_Excel -> upload_COUNTER_data
    test_upload_COUNTER_data_via_SQL_insert -> state_data_types_in_COUNTERData
    test_upload_COUNTER_data_via_SQL_insert -> upload_COUNTER_data
    test_match_direct_SUSHI_harvest_result -> state_data_types_in_COUNTERData
    test_GET_request_for_harvest_SUSHI_statistics -> harvest_SUSHI_statistics
    test_harvest_SUSHI_statistics -> harvest_SUSHI_statistics
    test_GET_request_for_upload_non_COUNTER_reports -> upload_non_COUNTER_reports
    test_upload_non_COUNTER_reports -> upload_non_COUNTER_reports


    subgraph cluster_test_bp_initialization {
        label="tests.test_bp_initialization"
        penwidth=5
        style="dashed"
        color="#782f40"

        blank_annualUsageCollectionTracking_data_types
        create_fiscalYears_CSV_file
        create_annualStatistics_CSV_file
        create_vendors_CSV_file
        create_vendorNotes_CSV_file
        create_statisticsSources_CSV_file
        create_statisticsSourceNotes_CSV_file
        create_resourceSources_CSV_file
        create_resourceSourceNotes_CSV_file
        create_statisticsResourceSources_CSV_file
        create_blank_annualUsageCollectionTracking_CSV_file
        create_annualUsageCollectionTracking_CSV_file
        test_GET_request_for_collect_FY_and_vendor_data
        test_collect_FY_and_vendor_data
        test_collect_sources_data
        test_GET_request_for_collect_AUCT_and_historical_COUNTER_data
        test_collect_AUCT_and_historical_COUNTER_data
        test_GET_request_for_upload_historical_non_COUNTER_usage
        files_for_test_upload_historical_non_COUNTER_usage
        "files_for_test_upload_historical_non_COUNTER_usage._files_for_test_upload_historical_non_COUNTER_usage"
        test_upload_historical_non_COUNTER_usage
    }
    blank_annualUsageCollectionTracking_data_types -> state_data_types_in_fiscalYears
    blank_annualUsageCollectionTracking_data_types -> state_data_types_in_statisticsSources
    blank_annualUsageCollectionTracking_data_types -> state_data_types_in_annualUsageCollectionTracking
    test_GET_request_for_collect_FY_and_vendor_data -> collect_FY_and_vendor_data
    test_collect_FY_and_vendor_data -> state_data_types_in_fiscalYears
    test_collect_FY_and_vendor_data -> state_data_types_in_annualStatistics
    test_collect_FY_and_vendor_data -> state_data_types_in_vendors
    test_collect_FY_and_vendor_data -> state_data_types_in_vendorNotes
    test_collect_FY_and_vendor_data -> collect_FY_and_vendor_data
    test_collect_sources_data -> state_data_types_in_statisticsSources
    test_collect_sources_data -> state_data_types_in_statisticsSourceNotes
    test_collect_sources_data -> state_data_types_in_resourceSources
    test_collect_sources_data -> state_data_types_in_resourceSourceNotes
    test_collect_sources_data -> state_data_types_in_statisticsResourceSources
    test_collect_sources_data -> collect_sources_data
    test_GET_request_for_collect_AUCT_and_historical_COUNTER_data -> collect_AUCT_and_historical_COUNTER_data
    test_collect_AUCT_and_historical_COUNTER_data -> state_data_types_in_annualUsageCollectionTracking
    test_collect_AUCT_and_historical_COUNTER_data -> state_data_types_in_COUNTERData
    test_collect_AUCT_and_historical_COUNTER_data -> collect_AUCT_and_historical_COUNTER_data
    test_GET_request_for_upload_historical_non_COUNTER_usage -> upload_historical_non_COUNTER_usage
    test_upload_historical_non_COUNTER_usage -> upload_historical_non_COUNTER_usage


    subgraph cluster_test_bp_login {
        label="tests.test_bp_login"
        penwidth=5
        style="dashed"
        color="#782f40"

        test_login_homepage
        test_logging_in
        test_logging_in_as_admin
        test_creating_an_account
    }
    test_login_homepage -> login_homepage


    subgraph cluster_test_bp_view_lists {
        label="tests.test_bp_view_lists"
        penwidth=5
        style="dashed"
        color="#782f40"

        test_view_lists_homepage
        test_GET_request_for_view_list_record
        test_view_list_record
        test_GET_request_for_edit_list_record_for_existing_record
        test_GET_request_for_edit_list_record_for_new_record
        test_edit_list_record
    }


    subgraph cluster_test_bp_view_usage {
        label="tests.test_bp_view_usage"
        penwidth=5
        style="dashed"
        color="#782f40"

        COUNTER_download_CSV
        test_create_COUNTER_fixed_vocab_list
        test_set_encoding
        test_view_usage_homepage
        test_run_custom_SQL_query
        test_use_predefined_SQL_query
        start_query_wizard_form_data
        test_start_query_wizard
        test_GET_query_wizard_sort_redirect
        PR_parameters
        test_construct_PR_query_with_wizard
        DR_parameters
        test_construct_DR_query_with_wizard
        TR_parameters
        test_construct_TR_query_with_wizard
        IR_parameters
        test_construct_IR_query_with_wizard
        construct_PR_query_with_wizard_without_string_match
        test_GET_request_for_download_non_COUNTER_usage
        test_download_non_COUNTER_usage
    }
    COUNTER_download_CSV -> create_downloads_folder
    test_create_COUNTER_fixed_vocab_list -> create_COUNTER_fixed_vocab_list
    test_set_encoding -> set_encoding
    test_view_usage_homepage -> view_usage_homepage
    test_run_custom_SQL_query -> run_custom_SQL_query
    test_use_predefined_SQL_query -> state_data_types_in_COUNTERData
    test_use_predefined_SQL_query -> use_predefined_SQL_query
    test_start_query_wizard -> start_query_wizard
    test_GET_query_wizard_sort_redirect -> start_query_wizard
    test_construct_PR_query_with_wizard -> state_data_types_in_COUNTERData
    test_construct_PR_query_with_wizard -> construct_PR_query_with_wizard
    test_construct_DR_query_with_wizard -> state_data_types_in_COUNTERData
    test_construct_DR_query_with_wizard -> construct_DR_query_with_wizard
    test_construct_TR_query_with_wizard -> state_data_types_in_COUNTERData
    test_construct_TR_query_with_wizard -> construct_TR_query_with_wizard
    test_construct_IR_query_with_wizard -> state_data_types_in_COUNTERData
    test_construct_IR_query_with_wizard -> construct_IR_query_with_wizard
    construct_PR_query_with_wizard_without_string_match -> construct_PR_query_with_wizard
    test_GET_request_for_download_non_COUNTER_usage -> download_non_COUNTER_usage
    test_download_non_COUNTER_usage -> create_downloads_folder
    test_download_non_COUNTER_usage -> download_non_COUNTER_usage


    subgraph cluster_test_ConvertJSONDictToDataframe {
        label="tests.test_ConvertJSONDictToDataframe"
        penwidth=5
        style="dashed"

        sample_SUSHI_PR_response_R5_JSON_dict
        sample_SUSHI_DR_response_R5_JSON_dict
        sample_SUSHI_TR_response_R5_JSON_dict
        sample_SUSHI_IR_response_R5_JSON_dict
        sample_SUSHI_PR_response_dataframe
        sample_SUSHI_DR_response_dataframe
        sample_SUSHI_TR_response_dataframe
        sample_SUSHI_IR_response_dataframe
        test_create_dataframe_from_R5_PR
        test_create_dataframe_from_R5_DR
        test_create_dataframe_from_R5_TR
        test_create_dataframe_from_R5_IR
    }
    sample_SUSHI_PR_response_dataframe -> state_data_types_in_COUNTERData
    sample_SUSHI_DR_response_dataframe -> state_data_types_in_COUNTERData
    sample_SUSHI_TR_response_dataframe -> state_data_types_in_COUNTERData
    sample_SUSHI_IR_response_dataframe -> state_data_types_in_COUNTERData
    test_create_dataframe_from_R5_PR -> create_dataframe_in_ConvertJSONDictToDataframe
    test_create_dataframe_from_R5_DR -> create_dataframe_in_ConvertJSONDictToDataframe
    test_create_dataframe_from_R5_TR -> create_dataframe_in_ConvertJSONDictToDataframe
    test_create_dataframe_from_R5_IR -> create_dataframe_in_ConvertJSONDictToDataframe


    subgraph cluster_test_FiscalYears {
        label="tests.test_FiscalYears"
        penwidth=5
        style="dashed"
        color="#ceb888"

        FY2020_FiscalYears_object
        test_calculate_depreciated_ACRL_60b
        test_calculate_depreciated_ACRL_63
        test_calculate_ACRL_61a
        test_calculate_ACRL_61b
        test_calculate_ARL_18
        test_calculate_ARL_19
        test_calculate_ARL_20
        FY2023_FiscalYears_object_and_record
        load_new_record_into_fiscalYears
        test_create_usage_tracking_records_for_fiscal_year
        FY2022_FiscalYears_object
        test_collect_fiscal_year_usage_statistics
    }
    test_calculate_depreciated_ACRL_60b -> calculate_depreciated_ACRL_60b
    test_calculate_depreciated_ACRL_63 -> calculate_depreciated_ACRL_63
    test_calculate_ACRL_61a -> calculate_ACRL_61a
    test_calculate_ACRL_61b -> calculate_ACRL_61b
    test_calculate_ARL_18 -> calculate_ARL_18
    test_calculate_ARL_19 -> calculate_ARL_19
    test_calculate_ARL_20 -> calculate_ARL_20
    test_create_usage_tracking_records_for_fiscal_year -> create_usage_tracking_records_for_fiscal_year
    test_collect_fiscal_year_usage_statistics -> collect_fiscal_year_usage_statistics
    test_create_usage_tracking_records_for_fiscal_year -> state_data_types_in_annualUsageCollectionTracking
    test_collect_fiscal_year_usage_statistics -> PATH_TO_CREDENTIALS_FILE


    subgraph cluster_test_ResourceSources {
        label="tests.test_ResourceSources"
        penwidth=5
        style="dashed"
        color="#ceb888"

        test_add_access_stop_date
        test_remove_access_stop_date
        test_change_StatisticsSource
        test_add_note_in_test_ResourceSources [
            label="test_add_note"
            /*shape=""*/
        ]
    }


    subgraph cluster_test_statements {
        label="tests.test_statements"
        penwidth=5
        style="dashed"
        color="#5cb8b2"

        test_format_list_for_stdout_with_list
        test_format_list_for_stdout_with_generator
        test_remove_IDE_spacing_from_statement
    }


    subgraph cluster_test_StatisticsSources {
        label="tests.test_StatisticsSources"
        penwidth=5
        style="dashed"
        color="#ceb888"

        current_month_like_most_recent_month_with_usage
        StatisticsSources_fixture
        test_fetch_SUSHI_information_for_API
        test_fetch_SUSHI_information_for_display
        SUSHI_credentials_fixture_in_test_StatisticsSources [
            label="SUSHI_credentials_fixture"
            /*shape=""*/
        ]
        reports_offered_by_StatisticsSource_fixture
        test_COUNTER_reports_offered_by_statistics_source
        test_check_if_data_in_database_no
        test_check_if_data_in_database_yes
        test_harvest_single_report
        test_harvest_single_report_with_partial_date_range
        test_harvest_R5_SUSHI
        test_harvest_R5_SUSHI_with_report_to_harvest
        test_harvest_R5_SUSHI_with_invalid_dates
        month_before_month_like_most_recent_month_with_usage
        harvest_R5_SUSHI_result_in_test_StatisticsSources [
            label="harvest_R5_SUSHI_result"
            /*shape=""*/
        ]
        test_collect_usage_statistics
        test_add_note_in_test_StatisticsSources [
            label="test_add_note"
            /*shape=""*/
        ]
        partially_duplicate_COUNTER_data
        non_duplicate_COUNTER_data
        test_check_if_data_already_in_COUNTERData
    }
    StatisticsSources_fixture -> PATH_TO_CREDENTIALS_FILE
    test_fetch_SUSHI_information_for_API -> fetch_SUSHI_information
    SUSHI_credentials_fixture_in_test_StatisticsSources -> fetch_SUSHI_information
    test_check_if_data_in_database_no -> _check_if_data_in_database
    test_check_if_data_in_database_yes -> _check_if_data_in_database
    test_harvest_single_report -> _harvest_single_report
    test_harvest_single_report_with_partial_date_range -> _harvest_single_report
    test_harvest_R5_SUSHI -> _harvest_R5_SUSHI
    test_harvest_R5_SUSHI_with_report_to_harvest -> _harvest_R5_SUSHI
    test_harvest_R5_SUSHI_with_invalid_dates -> _harvest_R5_SUSHI
    harvest_R5_SUSHI_result_in_test_StatisticsSources -> _harvest_R5_SUSHI
    test_collect_usage_statistics -> collect_usage_statistics
    partially_duplicate_COUNTER_data -> state_data_types_in_COUNTERData
    non_duplicate_COUNTER_data -> state_data_types_in_COUNTERData


    subgraph cluster_test_SUSHICallAndResponse {
        label="tests.test_SUSHICallAndResponse"
        penwidth=5
        style="dashed"

        SUSHI_credentials_fixture_in_test_SUSHICallAndResponse [
            label="SUSHI_credentials_fixture"
            /*shape=""*/
        ]
        StatisticsSource_instance_name
        test_status_call
        test_status_call_validity
        test_reports_call
        test_reports_call_validity
        list_of_reports
        test_PR_call_validity
        test_DR_call_validity
        test_TR_call_validity
        test_IR_call_validity
        test_call_with_invalid_credentials
    }
    test_status_call -> make_SUSHI_call
    test_status_call_validity -> make_SUSHI_call
    test_reports_call -> make_SUSHI_call
    test_reports_call_validity -> make_SUSHI_call
    test_PR_call_validity -> make_SUSHI_call
    test_DR_call_validity -> make_SUSHI_call
    test_TR_call_validity -> make_SUSHI_call
    test_IR_call_validity -> make_SUSHI_call
    test_call_with_invalid_credentials -> make_SUSHI_call


    subgraph cluster_test_UploadCOUNTERReports {
        label="tests.test_UploadCOUNTERReports"
        penwidth=5
        style="dashed"

        sample_COUNTER_report_workbook
        test_create_dataframe_from_single_workbook
        sample_COUNTER_report_workbooks
        test_create_dataframe
    }
    test_create_dataframe_from_single_workbook -> create_dataframe_in_UploadCOUNTERReports
    test_create_dataframe -> create_dataframe_in_UploadCOUNTERReports


    subgraph cluster_test_Vendors {
        label="tests.test_Vendors"
        penwidth=5
        style="dashed"
        color="#ceb888"

        test_get_statisticsSources_records
        test_get_resourceSources_records
        test_add_note_in_test_Vendors [
            label="test_add_note"
            /*shape=""*/
        ]
    }


    // Add connections for upload_file_to_S3_bucket https://github.com/ereiskind/nolcat/pull/191/commits/cdfa2e1ce058bf1e2129876b58ebe3c51be3b786
    // Add connections to query_database(first noted shape becomes valid here) https://github.com/ereiskind/nolcat/pull/191/commits/5d2927afd632902a5a6ce3077cca1eb0b2a6cd5a
    // Add connections for remaining MySQL functions(remaining noted shape becomes valid here) https://github.com/ereiskind/nolcat/pull/191/commits/e8e88a63b5909230b85b1d8b2f07f5be253beb6f
    // Add connections for remaining valid helper functions https://github.com/ereiskind/nolcat/pull/191/commits/209cd5e119e363e864d8f714d5ed3a27206d7a6a
    // Add connections for statements functions https://github.com/ereiskind/nolcat/pull/191/commits/d4c3789b3b46fb828f4f6c8fcbb3a2ecf8528a8f
    // Add function calls for relation functions https://github.com/ereiskind/nolcat/pull/191/commits/88494ba9e6207ddcca37c9eb00e9ea54578c01bc
    // Add function calls for workbook functions https://github.com/ereiskind/nolcat/pull/191/commits/9d809f04b20a758147db5df0db99868de326e672
    // Add connections to engine fixture https://github.com/ereiskind/nolcat/pull/191/commits/d5e5997f97fbd5eb604273458726b6f7458b9b7e
    // Add connections to app fixture https://github.com/ereiskind/nolcat/pull/191/commits/3f3240e7fb2de451bf35d4a1aaf0d74d5219863c
    // Add connections to remaining Flask fixtures https://github.com/ereiskind/nolcat/pull/191/commits/5e7d03a017a8e7f6e1d780ab107b8e0458c82a3b
    // Add connections to remaining conftest fixtures (note shape for S3 fixtures incorrect) https://github.com/ereiskind/nolcat/pull/191/commits/c9219caad163aed07ea762de6eaf963d0ff3a12a
    // Add calls to functions in test modules(`test_check_if_data_already_in_COUNTERData` didn't have shape; `SUSHI_credentials_fixture` in connections left unspecified) https://github.com/ereiskind/nolcat/pull/191/commits/089c07f3d213c69ffeb373abb768fb10524a2551
}